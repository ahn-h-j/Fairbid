# language: ko
기능: 경매 낙찰
  경매 종료 시간이 되면 자동으로 낙찰자가 결정된다.
  입찰이 없으면 유찰 처리되고, 입찰이 있으면 최고가 입찰자가 낙찰된다.

  배경:
    조건 서버가 실행중이다

  시나리오: 입찰이 있는 경매 종료 시 최고가 입찰자가 낙찰된다
    조건 판매자가 아래와 같은 경매 정보를 입력한다
      | title           | 맥북 프로 16인치              |
      | description     | 상태 매우 좋음                |
      | category        | ELECTRONICS                |
      | startPrice      | 1000000                    |
      | instantBuyPrice | 1500000                    |
      | duration        | HOURS_24                   |
    그리고 경매 등록을 요청한다
    그리고 응답 상태 코드는 201이다
    그리고 구매자가 원터치 입찰을 요청한다
    그리고 응답 상태 코드는 201이다
    만약 경매 종료 처리를 실행한다
    그러면 경매 상태가 "ENDED"로 변경된다
    그리고 1순위 낙찰 정보가 생성된다

  시나리오: 입찰이 없는 경매 종료 시 유찰 처리된다
    조건 판매자가 아래와 같은 경매 정보를 입력한다
      | title           | 아이폰 15 프로               |
      | description     | 미개봉 새상품                 |
      | category        | ELECTRONICS                |
      | startPrice      | 500000                     |
      | instantBuyPrice | 800000                     |
      | duration        | HOURS_24                   |
    그리고 경매 등록을 요청한다
    그리고 응답 상태 코드는 201이다
    만약 경매 종료 처리를 실행한다
    그러면 경매 상태가 "FAILED"로 변경된다

  시나리오: 2명이 입찰한 경매 종료 시 1순위와 2순위 낙찰 후보가 생성된다
    조건 판매자가 아래와 같은 경매 정보를 입력한다
      | title           | 갤럭시 S24 울트라            |
      | description     | 정품, 풀박스                 |
      | category        | ELECTRONICS                |
      | startPrice      | 800000                     |
      | instantBuyPrice | 1200000                    |
      | duration        | HOURS_24                   |
    그리고 경매 등록을 요청한다
    그리고 응답 상태 코드는 201이다
    그리고 구매자A가 850000원으로 직접 입찰을 요청한다
    그리고 응답 상태 코드는 201이다
    그리고 구매자B가 900000원으로 직접 입찰을 요청한다
    그리고 응답 상태 코드는 201이다
    만약 경매 종료 처리를 실행한다
    그러면 경매 상태가 "ENDED"로 변경된다
    그리고 1순위 낙찰 정보가 생성된다
    그리고 2순위 낙찰 후보 정보가 생성된다
