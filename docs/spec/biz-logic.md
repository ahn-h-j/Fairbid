# Business Logic (비즈니스 규칙)

> 경매 프로젝트 핵심 비즈니스 로직 정의

---

## Happy Path

### 1. 판매자: 상품 등록

**정보 입력**
- 사진, 상품명, 상태 등

**가격 설정**
- 경매 시작가 설정
- 즉시 구매가 설정 (선택사항)

**기간 설정**
- 24시간 / 48시간 중 선택

**제한 사항**
- 첫 입찰 발생 후 게시물 수정 불가
- 첫 입찰 발생 후 경매 취소 시 강력한 패널티 부여

---

### 2. 구매자: 탐색, 유입

- 검색 결과, 물품 리스트에서 상품 유입
- 현재 입찰가, 남은 시간 실시간 노출

---

### 3. 구매자: 입찰 or 즉시구매

#### 경매 입찰

- 판매자가 설정한 최저가부터 경매 시작
- 입찰 방식: 금액 지정 방식 / 원터치 입찰 방식
- 금액 지정 방식은 원터치 입찰 단위 이상만 가능

**입찰 단위표**

| 현재 가격 구간 | 버튼 클릭 시 추가 금액 |
|---------------|----------------------|
| 1만 원 미만 | +500원 |
| 1만 ~ 5만 원 미만 | +1,000원 |
| 5만 ~ 10만 원 미만 | +3,000원 |
| 10만 ~ 50만 원 미만 | +5,000원 |
| 50만 ~ 100만 원 미만 | +10,000원 |
| 100만 원 이상 | +30,000원 ~ 50,000원 |

#### 경매 연장

- 경매 종료 5분 전 입찰 발생 시 경매 시간 5분으로 재설정
- 연장 횟수 3회마다 원터치 입찰 단위 50% 증가 (악의적 연장 방지)

#### 즉시 구매

- 판매자가 설정한 즉시 구매가에 입찰
- 이후 1시간 최종 입찰 기회 제공
  - 입찰 있음 → 1시간 동안 입찰 경매 진행 후 낙찰 (연장 없음)
  - 입찰 없음 → 1시간 후 즉시 낙찰
- 종료 1시간 전 즉시 구매 발생 시에도 동일하게 1시간 최종 입찰 경매 진행
- 즉시 구매 시 즉시 구매가에 대한 가승인 필수
- 입찰가가 즉시구매가의 90% 이상일 경우 즉시 구매 버튼 비활성화

---

### 4. 거래 진행 (낙찰 후)

#### 거래 방식 결정

- 경매 등록 시 판매자가 거래 방식 설정 (직거래/택배/둘 다 가능)
- 둘 다 가능인 경우: 낙찰 후 구매자가 선택 (24시간 내)

#### 직거래 플로우

1. 판매자가 시간 제안 (장소는 경매 등록 시 설정)
2. 구매자 수락 또는 역제안
3. 약속 확정 후 거래 완료 확인 (양측)

#### 판매자 계좌 등록

- 판매자는 마이페이지에서 판매 대금 수령용 계좌 정보를 미리 등록
- 은행명, 계좌번호, 예금주
- 택배 거래 시 구매자에게 계좌 정보 노출 (입금 대기 상태일 때만)

#### 택배 플로우

1. 구매자가 배송지 입력 (24시간 내)
2. 구매자가 판매자 계좌로 입금 후 "입금 완료" 확인
3. 판매자가 입금 확인 ("입금 확인" 또는 "미입금" 처리)
   - 입금 확인 → 송장 입력 가능
   - 미입금 → 구매자에게 알림, 구매자가 다시 입금 완료 확인 가능
4. 판매자가 송장번호 입력 (72시간 내)
5. 구매자가 수령 확인

#### 노쇼 처리

- 구매자 미응답 (거래 방식 미선택, 주소 미입력, 시간 미수락): 24시간 → 노쇼
- 판매자 미응답 (시간 미제안, 송장 미입력): 24~72시간 → 노쇼
- 노쇼 시 해당 계정에 경고 부여
- 3회 경고 누적 시 회원 차단

#### 2순위 낙찰자 로직

- 1순위 노쇼 시 2순위에게 12시간 구매 권한 부여
- 2순위 입찰가가 낙찰가의 90% 이상 → 자동 승계
- 2순위 입찰가가 90% 미만 → 판매자에게 2순위 판매 여부 질문
