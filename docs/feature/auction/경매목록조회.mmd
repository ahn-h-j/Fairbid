sequenceDiagram
autonumber
actor Buyer as 구매자 (Client)
participant Ctrl as AuctionController
participant UC as GetAuctionListUseCase
participant Svc as AuctionQueryService
participant Port as AuctionRepository (Port)
participant Adapter as AuctionPersistenceAdapter
participant RDB as MySQL

    Buyer->>Ctrl: GET /api/v1/auctions?page=0&size=20&status=ACTIVE&keyword=아이폰
    Note right of Buyer: [Query Parameters]<br/>page: 페이지 번호 (기본 0)<br/>size: 페이지 크기 (기본 20)<br/>status: BIDDING, INSTANT_BUY_PENDING,<br/>ENDED, FAILED, CANCELLED<br/>keyword: 검색어 (선택)

    Ctrl->>UC: getAuctionList(query)
    UC->>Svc: getAuctionList(status, keyword, pageable)

    rect rgb(235, 245, 255)
        Note over Svc, RDB: [RDB 페이징 조회]
        Svc->>Port: findAll(status, keyword, pageable)
        Port->>Adapter: findAll(...)
        Adapter->>RDB: SELECT * FROM auctions<br/>WHERE status = ? AND title LIKE ?<br/>ORDER BY created_at DESC<br/>LIMIT ? OFFSET ?
        Note right of RDB: [조회 조건]<br/>- status 필터링<br/>- keyword LIKE 검색<br/>- 페이지네이션<br/>- 최신순 정렬
        RDB-->>Adapter: Page<AuctionEntity>
        Adapter-->>Port: Page<Auction>
        Port-->>Svc: Page<Auction>
    end

    rect rgb(240, 248, 255)
        Note over Svc: [응답 변환]
        Svc->>Svc: Page<AuctionListResponse> 변환
        Note right of Svc: [응답 필드]<br/>- id, title, thumbnailUrl<br/>- currentPrice, totalBidCount<br/>- status, endAt<br/>- totalElements, totalPages<br/>- hasNext
    end

    Svc-->>UC: Page<AuctionListResponse>
    UC-->>Ctrl: Page<AuctionListResponse>
    Ctrl-->>Buyer: 200 OK
