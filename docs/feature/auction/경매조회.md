sequenceDiagram
autonumber
actor Buyer as 구매자 (Client)
participant Ctrl as AuctionController
participant Svc as AuctionService
participant Repo as AuctionRepository
participant RDB as RDB (Database)

    Buyer->>Ctrl: GET /api/v1/auctions/{id}
    Ctrl->>Svc: getAuctionDetail(id)
    
    Svc->>Repo: findById(id)
    Repo->>RDB: SELECT * FROM auctions WHERE id = ?
    Note right of RDB: [조회 데이터]<br/>상품정보, 판매자정보, 시작가, 즉시구매가,<br/>현재최고가, 입찰단위, 총입찰횟수, 종료시간 등
    RDB-->>Repo: Auction Entity 반환
    Repo-->>Svc: AuctionEntity

    rect rgb(240, 248, 255)
        Note over Svc: [응답용 데이터 가공 로직]
        Svc->>Svc: 1. 즉시 구매 버튼 활성화 여부 계산<br/>(조건: 입찰가 <= 현재가 * 90%)
        Svc->>Svc: 2. 다음 입찰 가능 최소 금액 계산<br/>(현재 최고가 + 입찰 단위)
        Svc->>Svc: 3. 수정 가능 여부 플래그 계산<br/>(조건: 총 입찰 횟수 == 0 인 경우만 가능)
    end

    Svc-->>Ctrl: AuctionDetailResponseDto
    Ctrl-->>Buyer: 200 OK (Auction Detail Data)