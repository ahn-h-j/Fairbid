sequenceDiagram
autonumber
actor Seller as 판매자 (Client)
participant Ctrl as AuctionController
participant Svc as AuctionService
participant Repo as AuctionRepository
participant RDB as RDB (Database)

    Seller->>Ctrl: POST /api/v1/auctions (RegisterRequest)
    Ctrl->>Svc: createAuction(requestDto)
    
    rect rgb(235, 245, 255)
        Note over Svc: [비즈니스 로직 및 검증]
        Svc->>Svc: 1. Auction 상태 설정: status = 'BIDDING'
        Svc->>Svc: 2. 즉시구입가 검증: startPrice < instantBuyPrice
        Svc->>Svc: 3. 입찰 단위(bidIncrement) 계산
        Note over Policy: 시작가(Price) 구간별 계산<br/>1만 미만: +500<br/>1만~5만: +1,000<br/>...<br/>100만 이상: +30,000
        Svc->>Svc: 4. 종료 예정 시간(endTime) 계산 (24h/48h)
    end

    Svc->>Repo: save(auctionEntity)
    Repo->>RDB: INSERT INTO auctions (...)
    Note right of RDB: [저장 필드 리스트]<br/>- product_info (name, desc, images)<br/>- seller_id<br/>- start_price, instant_buy_price<br/>- current_highest_bid (초기값 = start_price)<br/>- start_at, end_at<br/>- bid_increment, total_bids(0)
    
    RDB-->>Repo: Success (Row Created)
    Repo-->>Svc: Saved Entity
    Svc-->>Ctrl: AuctionResponseDto
    Ctrl-->>Seller: 201 Created (Auction Detail)